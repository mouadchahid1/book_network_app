<h2>Returned Books</h2>
<hr>
@if (message) {
  <div class="alert" [class.alert-danger]="level === 'error' "
       [class.alert-success]="level === 'success' "
  >
    {{ message }}
  </div>
}
<div *ngIf="returnedBooks.content?.length">
  <table class="table table-bordered table-responsive table-hover table-dark">
    <thead class="text-center">
    <tr>
      <th>#</th>
      <th>Title</th>
      <th>ISBN</th>
      <th>Rate</th>
      <th><i class="bi bi-sliders"></i></th>
    </tr>
    </thead>
    <tbody class="text-center">
      @for (returnedBook of returnedBooks.content; track returnedBook; let index = $index) {
        <tr>
          <td>{{ index + 1 }}</td>
          <td>{{ returnedBook.title }}</td>
          <td>{{ returnedBook.isbn }}</td>
          <td>
            <app-book-stars [rating]="returnedBook.rate || 0"></app-book-stars>
            <span class="fw-bold"> {{ returnedBook.rate }}</span>
          </td>
          <td>
            <div class="d-flex gap-2 justify-content-center align-items-center">
              <i *ngIf="!returnedBook.returned"
                 class="bi bi-send-x text-primary pointer"></i>
              <i *ngIf="returnedBook.returned" class="bi bi-send-check text-success pointer"></i>
              <i (click)="approvedReturnBook(returnedBook)" class="bi bi-check2-square pointer"
                 [class.text-success]="returnedBook.returnApproved"></i>
            </div>
          </td>
        </tr>
      } @empty {
        <p class="text-center text-warning">No books found</p>
      }
    </tbody>
  </table>

  <div class="d-flex justify-content-center mt-4" *ngIf="returnedBooks.size">
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        <li class="page-item">
          <a class="page-link" href="javascript:void(0)"
             (click)="goToFirstPage()" aria-label="The first page"
             [class.disabled]="page === 0"
          >
            <i class="bi bi-arrow-left"></i>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="javascript:void(0)"
             (click)="goToPrevious()" aria-label="Previous"
             [class.disabled]="page === 0">
            <i class="bi bi-caret-left-fill"></i>
          </a>
        </li>
        <li class="page-item" *ngFor="let _ of [].constructor(returnedBooks.totalPage);let pageIndex = index">
          <a class="page-link" href="javascript:void(0)"
             (click)="goToPage(pageIndex)" aria-label="page Number"
             [class.active]="page===pageIndex">
            {{ pageIndex + 1 }}
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="javascript:void(0)"
             (click)="goToNextPage()" aria-label="Next"
             [class.disabled]="isLastPage">
            <i class="bi bi-caret-right-fill"></i>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="javascript:void(0)"
             (click)="goToLastPage()" aria-label="The last page"
             [class.disabled]="isLastPage">
            <i class="bi bi-arrow-right"></i>
          </a>
        </li>

      </ul>
    </nav>
  </div>
</div>
